var nodes = [
    {'id': 'sandy', group: 0, label: '#Sandy', level: 1},
    {'id': 'nyc', group: 0, label: '#NYC', level: 1},
    {'id': 'nj', group: 0, label: '#NJ', level: 1},
    {'id': 'sandypets', group: 0, label: '#SandyPets', level: 1},
    {'id': 'frankenstorm', group: 0, label: '#FrankenStorm', level: 1},
    {
        'id': 'breakingstorm',
        'group': 0,
        'label': 'breakingstorm',
        'level': 0
      },
      {
        'id': 'timmyodea',
        'group': 0,
        'label': 'timmyodea',
        'level': 0
      },
      {
        'id': 'satantoine',
        'group': 0,
        'label': 'satantoine',
        'level': 0
      },
      {
        'id': 'MattJohnstonTV',
        'group': 0,
        'label': 'MattJohnstonTV',
        'level': 0
      },
      {
        'id': 'fanlacrosse',
        'group': 0,
        'label': 'fanlacrosse',
        'level': 0
      },
      {
        'id': 'mocha_93',
        'group': 0,
        'label': 'mocha_93',
        'level': 0
      },
      {
        'id': 'feverplay_xo',
        'group': 0,
        'label': 'feverplay_xo',
        'level': 0
      },
      {
        'id': 'cubedreamer',
        'group': 0,
        'label': 'cubedreamer',
        'level': 0
      },
      {
        'id': 'fdilella',
        'group': 0,
        'label': 'fdilella',
        'level': 0
      },
      {
        'id': 'KCMichelle',
        'group': 0,
        'label': 'KCMichelle',
        'level': 0
      },
      {
        'id': 'NewDramatists',
        'group': 0,
        'label': 'NewDramatists',
        'level': 0
      },
      {
        'id': 'Stevie_Bo',
        'group': 0,
        'label': 'Stevie_Bo',
        'level': 0
      },
      {
        'id': 'PaulBell55',
        'group': 0,
        'label': 'PaulBell55',
        'level': 0
      },
      {
        'id': 'CarolHelf',
        'group': 0,
        'label': 'CarolHelf',
        'level': 0
      },
      {
        'id': 'lauritacruz47',
        'group': 0,
        'label': 'lauritacruz47',
        'level': 0
      },
      {
        'id': 'camai_',
        'group': 0,
        'label': 'camai_',
        'level': 0
      },
      {
        'id': 'MikeBeam',
        'group': 0,
        'label': 'MikeBeam',
        'level': 0
      },
      {
        'id': 'LuciiAgudo',
        'group': 0,
        'label': 'LuciiAgudo',
        'level': 0
      },
      {
        'id': 'RxResponse',
        'group': 0,
        'label': 'RxResponse',
        'level': 0
      },
      {
        'id': 'britthanus',
        'group': 0,
        'label': 'britthanus',
        'level': 0
      },
      {
        'id': 'adri16',
        'group': 0,
        'label': 'adri16',
        'level': 0
      },
      {
        'id': 'MarketWatch',
        'group': 0,
        'label': 'MarketWatch',
        'level': 0
      },
      {
        'id': 'Sorcha_Ellie',
        'group': 0,
        'label': 'Sorcha_Ellie',
        'level': 0
      },
      {
        'id': 'SupermanHotMale',
        'group': 0,
        'label': 'SupermanHotMale',
        'level': 0
      },
      {
        'id': 'StephTweet',
        'group': 0,
        'label': 'StephTweet',
        'level': 0
      },
      {
        'id': 'DanTRusu',
        'group': 0,
        'label': 'DanTRusu',
        'level': 0
      },
      {
        'id': 'Shirlz1123',
        'group': 0,
        'label': 'Shirlz1123',
        'level': 0
      },
      {
        'id': 'sncyf',
        'group': 0,
        'label': 'sncyf',
        'level': 0
      },
      {
        'id': 'philcloh2o',
        'group': 0,
        'label': 'philcloh2o',
        'level': 0
      },
      {
        'id': 'jmgreenwell',
        'group': 0,
        'label': 'jmgreenwell',
        'level': 0
      },
      {
        'id': 'BuniYani',
        'group': 0,
        'label': 'BuniYani',
        'level': 0
      },
      {
        'id': 'saraha64',
        'group': 0,
        'label': 'saraha64',
        'level': 0
      },
      {
        'id': 'commoncentsmom',
        'group': 0,
        'label': 'commoncentsmom',
        'level': 0
      },
      {
        'id': 'nathancreitz',
        'group': 0,
        'label': 'nathancreitz',
        'level': 0
      },
      {
        'id': 'ksrgatorfn',
        'group': 0,
        'label': 'ksrgatorfn',
        'level': 0
      },
      {
        'id': 'LovinMyMistakes',
        'group': 0,
        'label': 'LovinMyMistakes',
        'level': 0
      },
      {
        'id': 'rumsoncds',
        'group': 0,
        'label': 'rumsoncds',
        'level': 0
      },
      {
        'id': 'UUgeh',
        'group': 0,
        'label': 'UUgeh',
        'level': 0
      },
      {
        'id': 'ChrisJACooper',
        'group': 0,
        'label': 'ChrisJACooper',
        'level': 0
      },
      {
        'id': 'EMaloneG',
        'group': 0,
        'label': 'EMaloneG',
        'level': 0
      },
      {
        'id': 'PoppenReport',
        'group': 0,
        'label': 'PoppenReport',
        'level': 0
      },
      {
        'id': 'katew',
        'group': 0,
        'label': 'katew',
        'level': 0
      },
      {
        'id': 'dingbat',
        'group': 0,
        'label': 'dingbat',
        'level': 0
      },
      {
        'id': 'RNorthumberland',
        'group': 0,
        'label': 'RNorthumberland',
        'level': 0
      },
      {
        'id': 'VivaLaSlim',
        'group': 0,
        'label': 'VivaLaSlim',
        'level': 0
      },
      {
        'id': 'SoulNav',
        'group': 0,
        'label': 'SoulNav',
        'level': 0
      },
      {
        'id': 'faiza_n_ali',
        'group': 0,
        'label': 'faiza_n_ali',
        'level': 0
      },
      {
        'id': 'MichelleRafter',
        'group': 0,
        'label': 'MichelleRafter',
        'level': 0
      },
      {
        'id': 'Nelmcadoo',
        'group': 0,
        'label': 'Nelmcadoo',
        'level': 0
      },
      {
        'id': '1sthealthnews',
        'group': 0,
        'label': '1sthealthnews',
        'level': 0
      },
      {
        'id': 'Daneeo1985',
        'group': 0,
        'label': 'Daneeo1985',
        'level': 0
      },
      {
        'id': 'longfellow520',
        'group': 0,
        'label': 'longfellow520',
        'level': 0
      },
      {
        'id': 'HotmaMejia',
        'group': 0,
        'label': 'HotmaMejia',
        'level': 0
      },
      {
        'id': 'jmbelcher',
        'group': 0,
        'label': 'jmbelcher',
        'level': 0
      },
      {
        'id': 'HeiddiZ',
        'group': 0,
        'label': 'HeiddiZ',
        'level': 0
      },
      {
        'id': 'Jsurvivor_nyc',
        'group': 0,
        'label': 'Jsurvivor_nyc',
        'level': 0
      },
      {
        'id': 'DanaGalColeman',
        'group': 0,
        'label': 'DanaGalColeman',
        'level': 0
      },
      {
        'id': 'biasia',
        'group': 0,
        'label': 'biasia',
        'level': 0
      },
      {
        'id': 'nycTrend',
        'group': 0,
        'label': 'nycTrend',
        'level': 0
      },
      {
        'id': 'AboveAverageA',
        'group': 0,
        'label': 'AboveAverageA',
        'level': 0
      },
      {
        'id': '_LetsFlyAway_',
        'group': 0,
        'label': '_LetsFlyAway_',
        'level': 0
      },
      {
        'id': 'JahEmpress',
        'group': 0,
        'label': 'JahEmpress',
        'level': 0
      },
      {
        'id': 'SuSohn',
        'group': 0,
        'label': 'SuSohn',
        'level': 0
      },
      {
        'id': 'MadameRamotswe',
        'group': 0,
        'label': 'MadameRamotswe',
        'level': 0
      },
      {
        'id': 'normsantos',
        'group': 0,
        'label': 'normsantos',
        'level': 0
      },
      {
        'id': 'Halled',
        'group': 0,
        'label': 'Halled',
        'level': 0
      },
      {
        'id': 'KidDuckie',
        'group': 0,
        'label': 'KidDuckie',
        'level': 0
      },
      {
        'id': 'wlynnae',
        'group': 0,
        'label': 'wlynnae',
        'level': 0
      },
      {
        'id': 'markustedeschii',
        'group': 0,
        'label': 'markustedeschii',
        'level': 0
      },
      {
        'id': 'nicholatrinh',
        'group': 0,
        'label': 'nicholatrinh',
        'level': 0
      },
      {
        'id': 'Marketa1981',
        'group': 0,
        'label': 'Marketa1981',
        'level': 0
      },
      {
        'id': 'shaunrandol',
        'group': 0,
        'label': 'shaunrandol',
        'level': 0
      },
      {
        'id': 'kerstinshamberg',
        'group': 0,
        'label': 'kerstinshamberg',
        'level': 0
      },
      {
        'id': 'celestemc',
        'group': 0,
        'label': 'celestemc',
        'level': 0
      },
      {
        'id': 'coastalvegan',
        'group': 0,
        'label': 'coastalvegan',
        'level': 0
      },
      {
        'id': 'BuzzFeed',
        'group': 0,
        'label': 'BuzzFeed',
        'level': 0
      },
      {
        'id': 'SoLowKey1',
        'group': 0,
        'label': 'SoLowKey1',
        'level': 0
      },
      {
        'id': 'JasminGranado',
        'group': 0,
        'label': 'JasminGranado',
        'level': 0
      },
      {
        'id': 'CGaye2',
        'group': 0,
        'label': 'CGaye2',
        'level': 0
      },
      {
        'id': 'annemaccat',
        'group': 0,
        'label': 'annemaccat',
        'level': 0
      },
      {
        'id': 'MyFoxNY',
        'group': 0,
        'label': 'MyFoxNY',
        'level': 0
      },
      {
        'id': 'CirocBoyNick',
        'group': 0,
        'label': 'CirocBoyNick',
        'level': 0
      },
      {
        'id': 'beball',
        'group': 0,
        'label': 'beball',
        'level': 0
      },
      {
        'id': 'TheSunNews',
        'group': 0,
        'label': 'TheSunNews',
        'level': 0
      },
      {
        'id': 'alj770',
        'group': 0,
        'label': 'alj770',
        'level': 0
      },
      {
        'id': 'colleen52390759',
        'group': 0,
        'label': 'colleen52390759',
        'level': 0
      },
      {
        'id': 'RealMGillette',
        'group': 0,
        'label': 'RealMGillette',
        'level': 0
      },
      {
        'id': 'jimmbboe',
        'group': 0,
        'label': 'jimmbboe',
        'level': 0
      },
      {
        'id': 'vickyXlee',
        'group': 0,
        'label': 'vickyXlee',
        'level': 0
      },
      {
        'id': 'beachhomesnj',
        'group': 0,
        'label': 'beachhomesnj',
        'level': 0
      },
      {
        'id': 'meggy009',
        'group': 0,
        'label': 'meggy009',
        'level': 0
      },
      {
        'id': 'conquilia',
        'group': 0,
        'label': 'conquilia',
        'level': 0
      },
      {
        'id': 'DITZABELLA',
        'group': 0,
        'label': 'DITZABELLA',
        'level': 0
      },
      {
        'id': 'Kenosen2',
        'group': 0,
        'label': 'Kenosen2',
        'level': 0
      },
      {
        'id': 'optimismnow2',
        'group': 0,
        'label': 'optimismnow2',
        'level': 0
      },
      {
        'id': 'HealthcareWen',
        'group': 0,
        'label': 'HealthcareWen',
        'level': 0
      },
      {
        'id': 'attynyc212',
        'group': 0,
        'label': 'attynyc212',
        'level': 0
      },
      {
        'id': 'DNAinfo',
        'group': 0,
        'label': 'DNAinfo',
        'level': 0
      },
      {
        'id': 'JusAire',
        'group': 0,
        'label': 'JusAire',
        'level': 0
      },
      {
        'id': 'BTVDPW',
        'group': 0,
        'label': 'BTVDPW',
        'level': 0
      },
      {
        'id': 'luisdessommes',
        'group': 0,
        'label': 'luisdessommes',
        'level': 0
      },
      {
        'id': 'DareIBuild',
        'group': 0,
        'label': 'DareIBuild',
        'level': 0
      },
      {
        'id': 'johndavisonx',
        'group': 0,
        'label': 'johndavisonx',
        'level': 0
      },
      {
        'id': 'Cholosocksgirl',
        'group': 0,
        'label': 'Cholosocksgirl',
        'level': 0
      },
      {
        'id': 'BiscardiA',
        'group': 0,
        'label': 'BiscardiA',
        'level': 0
      },
      {
        'id': 'Johnstown_WX',
        'group': 0,
        'label': 'Johnstown_WX',
        'level': 0
      },
      {
        'id': 'SKSMediaCanada',
        'group': 0,
        'label': 'SKSMediaCanada',
        'level': 0
      },
      {
        'id': 'SallyMos',
        'group': 0,
        'label': 'SallyMos',
        'level': 0
      },
      {
        'id': 'Syreta',
        'group': 0,
        'label': 'Syreta',
        'level': 0
      },
      {
        'id': 'MarcClimaco',
        'group': 0,
        'label': 'MarcClimaco',
        'level': 0
      },
      {
        'id': 'NewBuffaloInn',
        'group': 0,
        'label': 'NewBuffaloInn',
        'level': 0
      },
      {
        'id': 'ShowCars1',
        'group': 0,
        'label': 'ShowCars1',
        'level': 0
      },
      {
        'id': 'abc_coza',
        'group': 0,
        'label': 'abc_coza',
        'level': 0
      },
      {
        'id': 'NYNewYorkCity',
        'group': 0,
        'label': 'NYNewYorkCity',
        'level': 0
      },
      {
        'id': 'wyattgallery',
        'group': 0,
        'label': 'wyattgallery',
        'level': 0
      },
      {
        'id': 'asrulsidiq',
        'group': 0,
        'label': 'asrulsidiq',
        'level': 0
      },
      {
        'id': 'Global_Montreal',
        'group': 0,
        'label': 'Global_Montreal',
        'level': 0
      },
      {
        'id': 'PiedmontHousing',
        'group': 0,
        'label': 'PiedmontHousing',
        'level': 0
      },
      {
        'id': 'NYCAviation',
        'group': 0,
        'label': 'NYCAviation',
        'level': 0
      },
      {
        'id': 'DNDailyPolitics',
        'group': 0,
        'label': 'DNDailyPolitics',
        'level': 0
      },
      {
        'id': 'Cubfnatic',
        'group': 0,
        'label': 'Cubfnatic',
        'level': 0
      },
      {
        'id': 'CalorieLab',
        'group': 0,
        'label': 'CalorieLab',
        'level': 0
      },
      {
        'id': 'DixHillsChurch',
        'group': 0,
        'label': 'DixHillsChurch',
        'level': 0
      },
      {
        'id': 'KelleyChubb',
        'group': 0,
        'label': 'KelleyChubb',
        'level': 0
      },
      {
        'id': 'bnogr',
        'group': 0,
        'label': 'bnogr',
        'level': 0
      }
]

var links = [
  {'target': 'sandy', 'source': 'satantoine', 'strength': 0.7}, {'target': 'sandy', 'source': 'MattJohnstonTV', 'strength': 0.5}, {'target': 'sandy', 'source': 'mocha_93', 'strength': 0.5}, {'target': 'sandy', 'source': 'feverplay_xo', 'strength': 0.7}, {'target': 'sandy', 'source': 'cubedreamer', 'strength': 0.8}, {'target': 'sandy', 'source': 'fdilella', 'strength': 0.7}, {'target': 'sandy', 'source': 'KCMichelle', 'strength': 0.5}, {'target': 'sandy', 'source': 'Stevie_Bo', 'strength': 0.5}, {'target': 'sandy', 'source': 'PaulBell55', 'strength': 0.7}, {'target': 'sandy', 'source': 'CarolHelf', 'strength': 0.8}, {'target': 'sandy', 'source': 'lauritacruz47', 'strength': 0.7}, {'target': 'sandy', 'source': 'camai_', 'strength': 0.5}, {'target': 'sandy', 'source': 'MikeBeam', 'strength': 0.8}, {'target': 'sandy', 'source': 'RxResponse', 'strength': 0.7}, {'target': 'sandy', 'source': 'adri16', 'strength': 0.7}, {'target': 'sandy', 'source': 'MarketWatch', 'strength': 0.5}, {'target': 'sandy', 'source': 'Sorcha_Ellie', 'strength': 0.8}, {'target': 'sandy', 'source': 'SupermanHotMale', 'strength': 0.5}, {'target': 'sandy', 'source': 'StephTweet', 'strength': 0.7}, {'target': 'sandy', 'source': 'DanTRusu', 'strength': 0.8}, {'target': 'sandy', 'source': 'Shirlz1123', 'strength': 0.7}, {'target': 'sandy', 'source': 'sncyf', 'strength': 0.5}, {'target': 'sandy', 'source': 'philcloh2o', 'strength': 0.8}, {'target': 'sandy', 'source': 'jmgreenwell', 'strength': 0.5}, {'target': 'sandy', 'source': 'BuniYani', 'strength': 0.7}, {'target': 'sandy', 'source': 'saraha64', 'strength': 0.8}, {'target': 'sandy', 'source': 'commoncentsmom', 'strength': 0.7}, {'target': 'sandy', 'source': 'nathancreitz', 'strength': 0.5}, {'target': 'sandy', 'source': 'ksrgatorfn', 'strength': 0.8}, {'target': 'sandy', 'source': 'rumsoncds', 'strength': 0.7}, {'target': 'sandy', 'source': 'EMaloneG', 'strength': 0.5}, {'target': 'sandy', 'source': 'PoppenReport', 'strength': 0.8}, {'target': 'sandy', 'source': 'katew', 'strength': 0.5}, {'target': 'sandy', 'source': 'dingbat', 'strength': 0.7}, {'target': 'sandy', 'source': 'faiza_n_ali', 'strength': 0.8}, {'target': 'sandy', 'source': 'MichelleRafter', 'strength': 0.5}, {'target': 'sandy', 'source': 'Nelmcadoo', 'strength': 0.7}, {'target': 'sandy', 'source': 'Daneeo1985', 'strength': 0.7}, {'target': 'sandy', 'source': 'longfellow520', 'strength': 0.5}, {'target': 'sandy', 'source': 'HotmaMejia', 'strength': 0.8}, {'target': 'sandy', 'source': 'jmbelcher', 'strength': 0.5}, {'target': 'sandy', 'source': 'HeiddiZ', 'strength': 0.7}, {'target': 'sandy', 'source': 'Jsurvivor_nyc', 'strength': 0.8}, {'target': 'sandy', 'source': 'DanaGalColeman', 'strength': 0.7}, {'target': 'sandy', 'source': 'biasia', 'strength': 0.5}, {'target': 'sandy', 'source': 'nycTrend', 'strength': 0.8}, {'target': 'sandy', 'source': '_LetsFlyAway_', 'strength': 0.7}, {'target': 'sandy', 'source': 'JahEmpress', 'strength': 0.8}, {'target': 'sandy', 'source': 'MadameRamotswe', 'strength': 0.5}, {'target': 'sandy', 'source': 'Halled', 'strength': 0.5}, {'target': 'sandy', 'source': 'wlynnae', 'strength': 0.8}, {'target': 'sandy', 'source': 'markustedeschii', 'strength': 0.7}, {'target': 'sandy', 'source': 'Marketa1981', 'strength': 0.8}, {'target': 'sandy', 'source': 'shaunrandol', 'strength': 0.5}, {'target': 'sandy', 'source': 'kerstinshamberg', 'strength': 0.7}, {'target': 'sandy', 'source': 'celestemc', 'strength': 0.8}, {'target': 'sandy', 'source': 'coastalvegan', 'strength': 0.7}, {'target': 'sandy', 'source': 'BuzzFeed', 'strength': 0.5}, {'target': 'sandy', 'source': 'JasminGranado', 'strength': 0.5}, {'target': 'sandy', 'source': 'annemaccat', 'strength': 0.8}, {'target': 'sandy', 'source': 'MyFoxNY', 'strength': 0.7}, {'target': 'sandy', 'source': 'CirocBoyNick', 'strength': 0.5}, {'target': 'sandy', 'source': 'beball', 'strength': 0.8}, {'target': 'sandy', 'source': 'alj770', 'strength': 0.7}, {'target': 'sandy', 'source': 'jimmbboe', 'strength': 0.5}, {'target': 'sandy', 'source': 'vickyXlee', 'strength': 0.8}, {'target': 'sandy', 'source': 'beachhomesnj', 'strength': 0.5}, {'target': 'sandy', 'source': 'meggy009', 'strength': 0.7}, {'target': 'sandy', 'source': 'DITZABELLA', 'strength': 0.7}, {'target': 'sandy', 'source': 'Kenosen2', 'strength': 0.5}, {'target': 'sandy', 'source': 'HealthcareWen', 'strength': 0.5}, {'target': 'sandy', 'source': 'attynyc212', 'strength': 0.7}, {'target': 'sandy', 'source': 'DNAinfo', 'strength': 0.8}, {'target': 'sandy', 'source': 'JusAire', 'strength': 0.7}, {'target': 'sandy', 'source': 'luisdessommes', 'strength': 0.8}, {'target': 'sandy', 'source': 'DareIBuild', 'strength': 0.5}, {'target': 'sandy', 'source': 'johndavisonx', 'strength': 0.7}, {'target': 'sandy', 'source': 'Cholosocksgirl', 'strength': 0.8}, {'target': 'sandy', 'source': 'BiscardiA', 'strength': 0.7}, {'target': 'sandy', 'source': 'SKSMediaCanada', 'strength': 0.8}, {'target': 'sandy', 'source': 'SallyMos', 'strength': 0.5}, {'target': 'sandy', 'source': 'MarcClimaco', 'strength': 0.8}, {'target': 'sandy', 'source': 'wyattgallery', 'strength': 0.7}, {'target': 'sandy', 'source': 'asrulsidiq', 'strength': 0.8}, {'target': 'sandy', 'source': 'Global_Montreal', 'strength': 0.7}, {'target': 'sandy', 'source': 'PiedmontHousing', 'strength': 0.5}, {'target': 'sandy', 'source': 'DNDailyPolitics', 'strength': 0.5}, {'target': 'sandy', 'source': 'Cubfnatic', 'strength': 0.7}, {'target': 'sandy', 'source': 'KelleyChubb', 'strength': 0.5},
  {'target': 'nyc', 'source': 'satantoine', 'strength': 0.65}, {'target': 'nyc', 'source': 'adri16', 'strength': 0.85}, {'target': 'nyc', 'source': 'Sorcha_Ellie', 'strength': 0.7}, {'target': 'nyc', 'source': 'philcloh2o', 'strength': 0.75}, {'target': 'nyc', 'source': 'saraha64', 'strength': 0.85}, {'target': 'nyc', 'source': 'EMaloneG', 'strength': 0}, {'target': 'nyc', 'source': 'dingbat', 'strength': 0.85}, {'target': 'nyc', 'source': 'faiza_n_ali', 'strength': 0.7}, {'target': 'nyc', 'source': 'MichelleRafter', 'strength': 0.8}, {'target': 'nyc', 'source': 'Nelmcadoo', 'strength': 0.75}, {'target': 'nyc', 'source': 'HotmaMejia', 'strength': 0.7}, {'target': 'nyc', 'source': 'jmbelcher', 'strength': 0.85}, {'target': 'nyc', 'source': 'HeiddiZ', 'strength': 0.8}, {'target': 'nyc', 'source': 'JahEmpress', 'strength': 0.8}, {'target': 'nyc', 'source': 'MadameRamotswe', 'strength': 0.75}, {'target': 'nyc', 'source': 'wlynnae', 'strength': 0.7}, {'target': 'nyc', 'source': 'shaunrandol', 'strength': 0}, {'target': 'nyc', 'source': 'coastalvegan', 'strength': 0.65}, {'target': 'nyc', 'source': 'JasminGranado', 'strength': 0}, {'target': 'nyc', 'source': 'alj770', 'strength': 0.65}, {'target': 'nyc', 'source': 'DITZABELLA', 'strength': 0.65}, {'target': 'nyc', 'source': 'Kenosen2', 'strength': 0.75}, {'target': 'nyc', 'source': 'DNAinfo', 'strength': 0.85}, {'target': 'nyc', 'source': 'JusAire', 'strength': 0.75}, {'target': 'nyc', 'source': 'luisdessommes', 'strength': 0.7}, {'target': 'nyc', 'source': 'wyattgallery', 'strength': 0.65}, {'target': 'nyc', 'source': 'Global_Montreal', 'strength': 0.65}, {'target': 'nyc', 'source': 'KelleyChubb', 'strength': 0.75},
  {'target': 'nj', 'source': 'JasminGranado', 'strength': 0.5}, {'target': 'nj', 'source': 'CirocBoyNick', 'strength': 0.5},
  {'target': 'sandypets', 'source': 'camai_', 'strength': 0.5}, {'target': 'sandypets', 'source': 'Daneeo1985', 'strength': 0.7}, {'target': 'sandypets', 'source': 'biasia', 'strength': 0.5}, {'target': 'sandypets', 'source': 'Marketa1981', 'strength': 0.8}, {'target': 'sandypets', 'source': 'SallyMos', 'strength': 0.5},
  {'target': 'frankenstorm', 'source': 'RxResponse', 'strength': 0.7}, {'target': 'frankenstorm', 'source': 'EMaloneG', 'strength': 0.5}, {'target': 'frankenstorm', 'source': 'SKSMediaCanada', 'strength': 0.8}
]


function getNodeColor(node) {
    return node.level === 1 ? 'red' : 'gray'
}

// var width = 960;
// var height = 580;

function getNeighbors(node) {
  return links.reduce(function (neighbors, link) {
      if (link.target.id === node.id) {
        neighbors.push(link.source.id)
      } else if (link.source.id === node.id) {
        neighbors.push(link.target.id)
      }
      return neighbors
    },
    [node.id]
  )
}

function isNeighborLink(node, link) {
  return link.target.id === node.id || link.source.id === node.id
}


function getNodeColor(node, neighbors) {
  if (Array.isArray(neighbors) && neighbors.indexOf(node.id) > -1) {
    return node.level === 1 ? 'blue' : 'green'
  }

  return node.level === 1 ? 'red' : 'gray'
}


function getLinkColor(node, link) {
  return isNeighborLink(node, link) ? 'green' : '#e5e5e5'
}

function getTextColor(node, neighbors) {
  return Array.isArray(neighbors) && neighbors.indexOf(node.id) > -1 ? 'green' : 'black'
}

var width = window.innerWidth
var height = window.innerHeight

var svg = d3.select('svg')
svg.attr('width', width).attr('height', height)

// simulation setup with all forces
var linkForce = d3
  .forceLink()
  .id(function (link) { return link.id })
  .strength(function (link) { return link.strength })

var simulation = d3
  .forceSimulation()
  .force('link', linkForce)
  .force('charge', d3.forceManyBody().strength(-120))
  .force('center', d3.forceCenter(width / 2, height / 2))

var dragDrop = d3.drag().on('start', function (node) {
  node.fx = node.x
  node.fy = node.y
}).on('drag', function (node) {
  simulation.alphaTarget(0.7).restart()
  node.fx = d3.event.x
  node.fy = d3.event.y
}).on('end', function (node) {
  if (!d3.event.active) {
    simulation.alphaTarget(0)
  }
  node.fx = null
  node.fy = null
})

function selectNode(selectedNode) {
  var neighbors = getNeighbors(selectedNode)

  // we modify the styles to highlight selected nodes
  nodeElements.attr('fill', function (node) { return getNodeColor(node, neighbors) })
  textElements.attr('fill', function (node) { return getTextColor(node, neighbors) })
  linkElements.attr('stroke', function (link) { return getLinkColor(selectedNode, link) })
}

var linkElements = svg.append("g")
  .attr("class", "links")
  .selectAll("line")
  .data(links)
  .enter().append("line")
    .attr("stroke-width", 1)
	  .attr("stroke", "rgba(50, 50, 50, 0.2)")

var nodeElements = svg.append("g")
  .attr("class", "nodes")
  .selectAll("circle")
  .data(nodes)
  .enter().append("circle")
    .attr("r", 10)
    .attr("fill", getNodeColor)
    .call(dragDrop)
    .on('click', selectNode)

var textElements = svg.append("g")
  .attr("class", "texts")
  .selectAll("text")
  .data(nodes)
  .enter().append("text")
    .text(function (node) { return  node.label })
	  .attr("font-size", 15)
	  .attr("dx", 15)
    .attr("dy", 4)

simulation.nodes(nodes).on('tick', () => {
  nodeElements
    .attr('cx', function (node) { return node.x })
    .attr('cy', function (node) { return node.y })
  textElements
    .attr('x', function (node) { return node.x })
    .attr('y', function (node) { return node.y })
  linkElements
    .attr('x1', function (link) { return link.source.x })
    .attr('y1', function (link) { return link.source.y })
    .attr('x2', function (link) { return link.target.x })
    .attr('y2', function (link) { return link.target.y })
})

simulation.force("link").links(links)